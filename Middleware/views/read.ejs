<!DOCTYPE html>
<html>
<head>
	<title>read</title>
	<link rel="stylesheet" href="/stylesheets/bootstrap.css">
	<link rel="stylesheet" href="/stylesheets/style.css">
	<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
	<script type="text/javascript" src="/javascripts/bootstrap.js"></script>
</head>
<body>
	<div class="container">
		<div class="row">
			<!-- 전체 grid -->
			<div class="col-12 col-lg-8 offset-lg-2">
				<!-- form -->
				<div class="col-12 col-lg-8 offset-lg-2" style="margin-top: 2em;">
					<form action="/read" method="post" id="listForm">
						<!-- select -->
						<div class="row">
							<div class="col-10">
								<select class="form-control" name="condition" form="listForm" style="width: 100%;">
								<% for (var i = 0; i < data_set.length; i++) { %>
									<% var j; %>
									<% if (data_set[i].length - 1 <= 0) { %>
										<% j = 0; %>
									<% } else { %>
										<% j = data_set[i].length - 1; %>
									<% } %>
									<option value="<%= i %>"><%= data_set[i][0].created_at + " ~ " + data_set[i][j].created_at; %></option>
								<% } %>
								</select>
							</div>
							<!-- button -->
							<div class="col-2" style="margin-left: -17px; margin-top: 2px;">
								<input type="image" src="images/search.png" style="width: 32px; height: 32px">	
							</div>
						</div>
					</form>
				</div>
				<!-- form end -->
				<!-- image view -->
				<div id="carouselExampleControls" class="carousel slide col-12">
				  <div class="carousel-inner" role="listbox">
				    <div class="carousel-item active">
				      <img class="d-block img-fluid" src="https://storage.googleapis.com/<%= data_set[index][0].imageUrl %>" alt="First slide">
				    </div>
					    <% for (var j = 1; j < data_set[index].length; j++) { %>
					    <div class="carousel-item">
					      <img class="d-block img-fluid" src="https://storage.googleapis.com/<%= data_set[index][j].imageUrl %>" alt="img">
					    </div>
					    <% } %>
				  </div>
				  <a class="carousel-control-prev" id="prevBtn" href="#carouselExampleControls" role="button" data-slide="prev">
				    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
				    <span class="sr-only">Previous</span>
				  </a>
				  <a class="carousel-control-next" id="nextBtn" href="#carouselExampleControls" role="button" data-slide="next">
				    <span class="carousel-control-next-icon" aria-hidden="true"></span>
				    <span class="sr-only">Next</span>
				  </a>
				</div>
				<!-- image view end -->
				<h3 style="text-align: center; margin-top: 1em;"><span id="slide">1</span> / <%= data_set[index].length %></h3>
				<footer class="footer">
					<p>Copyright(C)2017. All rights reserved by PNU Endurance.</p>
				</footer>
			</div>
		</div>
	</div>
	<script>
		var prevBtn = document.getElementById("prevBtn").addEventListener("click", CountMinus);
		var nextBtn = document.getElementById("nextBtn").addEventListener("click", CountPlus);
		var slide = document.getElementById("slide").innerHTML;
		function CountMinus(prevBtn) {
			
			if (slide > 1) {
				slide = --slide;
				document.getElementById("slide").innerHTML = slide;
			}
			else if (slide == 1) {
				slide = <%= data_set[index].length %>;
				document.getElementById("slide").innerHTML = slide;
			}
		}

		function CountPlus(nextBtn) {
			// var slide = document.getElementById("slide").innerHTML;
			if (slide < <%= data_set[index].length %>) {
				slide = ++slide;
				document.getElementById("slide").innerHTML = slide;
			}
			else if (slide == <%= data_set[index].length %>) {
				slide = 1;
				document.getElementById("slide").innerHTML = slide;
			}
		}
	</script>
</body>
</html>